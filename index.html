<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Planets of Faith</title>
  <link href="https://fonts.cdnfonts.com/css/farm-wave-free" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Gowun+Batang&family=Noto+Sans+KR:wght@100..900&display=swap" rel="stylesheet">

<style>
body {
  margin: 0;
  background: #2a231f;
  height: 10000vh; /* ìŠ¤í¬ë¡¤ ê±°ë¦¬ */
}

/* ì¸íŠ¸ë¡œ ì˜¤ë²„ë ˆì´: ë°°ê²½ ìš°ì£¼ + í–‰ì„± ìœ„ì— ë°˜íˆ¬ëª… ë ˆì´ì–´ */
.intro-overlay {
  position: fixed;
  inset: 0;
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 9999;
  opacity: 1;
  transition: opacity 1s ease;
}

/* ğŸ”¹ íƒ€ì´í‹€ + ë©˜íŠ¸ë¥¼ ë¬¶ëŠ” ê·¸ë£¹ */
.intro-group {
  display: flex;
  flex-direction: column;
  align-items: center;  /* ê°€ë¡œ ì¤‘ì•™ ì •ë ¬ */
  gap: 8px;
  transform: translateY(-8vh);
}

/* ì¸íŠ¸ë¡œ í…ìŠ¤íŠ¸ */
.intro-text {
  font-family: "Gowun Batang", serif;
  color: #F4E4DC;
  max-width: 80vw;
  font-size: 1rem;
  text-align: center;
  line-height: 1.7;
  letter-spacing: 0.04em;
  opacity: 0;                 /* ì²˜ìŒì—ëŠ” 0 â†’ JSì—ì„œ 1ë¡œ ì˜¬ë¦¼ */
  transition: opacity 0.6s ease;
}

/* ìƒë‹¨ í…ìŠ¤íŠ¸ */
.title {
  font-family: "Gowun Batang", serif;
  position: fixed;
  top: 20px;
  left: 50%;
  transform: translateX(-50%);
  color: #F4E4DC;
  font-size: 1rem;
  text-shadow: 0 0 8px rgba(0,0,0,0.6);
  z-index: 1;
  opacity: 0;                 /* ğŸ”¹ ì²˜ìŒì—” ì•ˆ ë³´ì´ê²Œ */
  transition: opacity 1s ease;
}

/* í–‰ì„± */
.planet {
  position: fixed;
  left: 50%;
  bottom: 0;
  transform: translate(-50%, 160vw); /* íšŒì „ ì œê±°, ìœ„ì¹˜ë§Œ ê³ ì • */
  width: 180vw;
  height: 180vw;
}

/* ì‹¤ì œë¡œ íšŒì „í•˜ëŠ” í–‰ì„± ì´ë¯¸ì§€(ê°€ìƒ ìš”ì†Œ) */
.planet::before {
  content: "";
  position: absolute;
  inset: 0;
  background: url("planet.png") center top / cover no-repeat;
  transform-origin: 50% 50%;
  transform: rotate(var(--planet-angle, 0deg));
}

/* ë°°ê²½ ìš°ì£¼ ë ˆì´ì–´ */
.bg-layer {
  position: fixed;
  top: 0;
  left: 0;
  width: 150vw;
  height: 150vh;
  background: url("backgroundspace.jpg") center/cover no-repeat;
  z-index: -2; /* ë§¨ ë’¤ */
  pointer-events: none;
  transform-origin: 50% 60%;
}

/* â­ í–‰ì„± ì¤‘ì‹¬ì„ ê¸°ì¤€ìœ¼ë¡œ ë„ëŠ” ë³„ ë ˆì´ì–´ (í–‰ì„± ì•ˆì— ì ˆëŒ€ ë°°ì¹˜) */
.orbit-layer {
  position: absolute;
  inset: 0;
  pointer-events: none;
}

/* ê° í•˜ì–€ ì  ê³µí†µ ìŠ¤íƒ€ì¼ + ë°˜ì§ë°˜ì§ ì• ë‹ˆë©”ì´ì…˜ */
.orbit-dot {
  position: absolute;
  top: 50%;   /* ì—¬ì „íˆ í–‰ì„± ì¤‘ì‹¬ ê¸°ì¤€ */
  left: 50%;
  width: 1000px;
  height: 1000px;
  border-radius: 50%;
  background: #ffffff;
  box-shadow: 0 0 12px rgba(255,255,255,0.9);
  /* ğŸ”¼ í–‰ì„± ë°˜ì§€ë¦„ë³´ë‹¤ í›¨ì”¬ ìœ„ë¡œ ì˜¬ë¦¬ê¸° (1.4ë°° ì •ë„) */
  transform: translate(-50%, -50%) rotate(0deg) translateY(-2000vh);
  animation: twinkle 3s ease-in-out infinite alternate;
}

/* 1ë°”í€´(360ë„)ë¥¼ 5ë“±ë¶„í•œ ìœ„ì¹˜ë“¤: 72ë„ì”© íšŒì „ */
.orbit-dot:nth-child(2) {
  transform: translate(-50%, -50%) rotate(72deg) translateY(-2000vh);
  animation-delay: 0.5s;
}
.orbit-dot:nth-child(3) {
  transform: translate(-50%, -50%) rotate(144deg) translateY(-2000vh);
  animation-delay: 1s;
}
.orbit-dot:nth-child(4) {
  transform: translate(-50%, -50%) rotate(216deg) translateY(-2000vh);
  animation-delay: 1.5s;
}
.orbit-dot:nth-child(5) {
  transform: translate(-50%, -50%) rotate(288deg) translateY(-2000vh);
  animation-delay: 2s;
}

/* ë³„ ë°˜ì§ì„ */
@keyframes twinkle {
  0%   { opacity: 0.3; box-shadow: 0 0 4px rgba(255,255,255,0.4); }
  50%  { opacity: 0.9; box-shadow: 0 0 12px rgba(255,255,255,1); }
  100% { opacity: 0.5; box-shadow: 0 0 6px rgba(255,255,255,0.7); }
}

/* ê±·ëŠ” ìºë¦­í„°(ì–´ë¦°ì™•ì+ì—¬ìš°) */
.walker {
  position: fixed;
  left: 50%;
  bottom: 8vh;               /* ì´ˆê¸°ê°’ - JSì—ì„œ ë®ì–´ì”€ */
  transform: translateX(-50%);
  width: 800px;
  height: 800px;
  background-image: url("walkani.png");
  background-repeat: no-repeat;
  background-position: 0 0;
  transform-origin: 50% 100%; /* ë°œ(ì•„ë˜ ì¤‘ì•™)ì„ ê¸°ì¤€ì ìœ¼ë¡œ */
  opacity: 0;                 /* ì¸íŠ¸ë¡œ ë™ì•ˆì€ ë³´ì´ì§€ ì•ŠìŒ */
  transition: opacity 1s ease;
}

/* ğŸ”¹ ì¸íŠ¸ë¡œ íƒ€ì´í‹€: ê·¸ë£¹ ì•ˆì—ì„œ ì¤‘ì•™ ì •ë ¬ */
.intro-title {
  font-family: 'Farm Wave Free', sans-serif;
  font-size: 2.5rem;
  color: #F4E4DC;
  letter-spacing: 0.05em;
  text-shadow: 0 0 12px rgba(0,0,0,0.6);
  opacity: 1;
  transition: opacity 1s ease;
  pointer-events: none;
  text-align: center;
}

/* ì¸íŠ¸ë¡œ ëë‚  ë•Œ ì‚¬ë¼ì§€ëŠ” ìƒíƒœ */
.intro-title.hide {
  opacity: 0;
}
</style>

</head>
<body>
  <!-- ì¸íŠ¸ë¡œ í…ìŠ¤íŠ¸ ì˜¤ë²„ë ˆì´ -->
  <div class="intro-overlay">
    <div class="intro-group">
      <div class="intro-title">Planets of Faith</div>
      <div class="intro-text"></div>
    </div>
  </div>

  <!-- ë°°ê²½ ìš°ì£¼ -->
  <div class="bg-layer"></div>

  <!-- í° í–‰ì„± + ê·¸ ì¤‘ì‹¬ì„ ë„ëŠ” ë³„ë“¤ -->
  <div class="planet">
    <div class="orbit-layer">
      <div class="orbit-dot"></div>
      <div class="orbit-dot"></div>
      <div class="orbit-dot"></div>
      <div class="orbit-dot"></div>
      <div class="orbit-dot"></div>
    </div>
  </div>

  <!-- ìƒë‹¨ í…ìŠ¤íŠ¸ -->
  <div class="title">íƒì‚¬í•  í–‰ì„±ì„ ì„ íƒí•˜ì„¸ìš”</div>

  <!-- ê±·ëŠ” ìºë¦­í„° -->
  <div class="walker"></div>

<script>
  const planet = document.querySelector('.planet');
  const bg = document.querySelector('.bg-layer');
  const walker = document.querySelector('.walker');
  const orbitLayer = document.querySelector('.orbit-layer');

  // --- ì¸íŠ¸ë¡œ ê´€ë ¨ ìš”ì†Œ/í…ìŠ¤íŠ¸ ---
  const introOverlay = document.querySelector('.intro-overlay');
  const introTextEl = document.querySelector('.intro-text');

  const introLines = [
    "(scroll down)",
    "ì„¸ìƒì—ëŠ” ì €ë§ˆë‹¤ ì¥ê³  ìˆëŠ” ë¯¿ìŒì´ ìˆë‹¤ê³  í•´ìš”.",
    "â€˜ì‚¬ë‘ì€ ìµœê³ ì˜ ê°€ì¹˜ì•¼.', â€˜ê°ì •ì€ í†µì œí•´ì•¼í•´.â€™, â€˜ì˜ì›í•œ ê±´ ì—†ì–´.' ë“±.",
    "ìê¸° ë§ì„ ê°€ì¥ ì˜³ë‹¤ê³  ë¯¿ëŠ” ì‚¬ëŒë“¤ì€ ì„œë¡œì˜ ë§ì´ ë“¤ë¦¬ì§€ ì•ŠëŠ”ëŒ€ìš”.",
    "ì‚´ê¸° ìœ„í•´ ë§Œë“  ë¯¿ìŒë“¤ì€ ì´ ê³³ì—ì„œ ëª¨ì—¬ í–‰ì„±ì„ ì´ë¤„ìš”.",
    "ì–´ë–¤ ì‚¬ëŒë“¤ì€ ê·¸ í–‰ì„± ì•ˆì— í‰ìƒ ê°‡íŒ ì±„ ì‚´ì•„ê°„ëŒ€ìš”.",
    "ëˆ„ê°€ ì˜³ì€ì§€ëŠ” ëª°ë¼ë„, í–‰ì„±ë“¤ ì‚¬ì´ë¥¼ íƒí—˜í•˜ë©° ë§ë“¤ì„ ëª¨ìœ¼ê³  ìˆì–´ìš”.",
    "ì œê°€ ë¯¿ê³  ì‚´ì•„ê°ˆ ê°€ì¹˜ëŠ” ë¬´ì—‡ì¼ê¹Œìš”?"
  ];

  let introDone = false;      // ì¸íŠ¸ë¡œ ì™„ë£Œ ì—¬ë¶€
  let introIndex = 0;         // í˜„ì¬ ë³´ì—¬ì£¼ëŠ” ë¬¸ì¥ ì¸ë±ìŠ¤
  let introAnimating = false; // í˜ì´ë“œ ì¤‘ì¸ì§€

  // ì¸íŠ¸ë¡œ ì‹œì‘: í•œ ì¤„ ë³´ì—¬ì£¼ê¸°
  function showIntroLine(index) {
    introAnimating = true;
    introTextEl.style.opacity = 0;

    setTimeout(() => {
      introTextEl.textContent = introLines[index];
      introTextEl.style.opacity = 1;
      setTimeout(() => {
        introAnimating = false;
      }, 600);
    }, 150);
  }

  // í˜ì´ì§€ ë¡œë“œ í›„ ì²« ë¬¸ì¥ í‘œì‹œ
  window.addEventListener('load', () => {
    document.body.style.overflow = 'hidden'; // ì¸íŠ¸ë¡œ ë™ì•ˆì€ ì‹¤ì œ ìŠ¤í¬ë¡¤ ë§‰ê¸°
    showIntroLine(introIndex);
  });

  function finishIntro() {
    if (introDone) return;
    introDone = true;

    // ì¸íŠ¸ë¡œ ì˜¤ë²„ë ˆì´ ì„œì„œíˆ ì‚¬ë¼ì§
    if (introOverlay) {
      introOverlay.style.opacity = 0;
      setTimeout(() => {
        introOverlay.style.display = 'none';
      }, 1000);
    }

    const titleEl = document.querySelector('.title');
    if (titleEl) {
      titleEl.style.opacity = 1;
    }

    document.querySelector('.intro-title').classList.add('hide');

    // ìºë¦­í„° ì„œì„œíˆ ë‚˜íƒ€ë‚˜ê¸°
    walker.style.opacity = 1;

    // ì´ì œë¶€í„° ì‹¤ì œ ìŠ¤í¬ë¡¤ ê°€ëŠ¥
    document.body.style.overflow = 'auto';

    // ì¸íŠ¸ë¡œìš© wheel í•¸ë“¤ëŸ¬ ì œê±°
    window.removeEventListener('wheel', handleIntroWheel, { passive: false });

    // ìŠ¤í¬ë¡¤ ê¸°ì¤€ê°’ ì´ˆê¸°í™”
    lastScrollY = window.scrollY;
  }

  // ì¸íŠ¸ë¡œ ë™ì•ˆ wheel ì´ë²¤íŠ¸ë¡œë§Œ ë¬¸ì¥ ë³€ê²½ (í•œ ë²ˆì— í•œ ì¤„)
  function handleIntroWheel(e) {
    if (introDone) return;

    e.preventDefault(); // ì‹¤ì œ ìŠ¤í¬ë¡¤ ë§‰ê¸°

    if (introAnimating) return;

    const threshold = 10;

    if (e.deltaY > threshold) {
      // ì•„ë˜ë¡œ ìŠ¤í¬ë¡¤
      if (introIndex < introLines.length - 1) {
        introIndex++;
        showIntroLine(introIndex);
      } else {
        // ë§ˆì§€ë§‰ ë¬¸ì¥ì—ì„œ í•œ ë²ˆ ë” ë‚´ë¦¬ë©´ ì¸íŠ¸ë¡œ ì¢…ë£Œ
        finishIntro();
      }
    } else if (e.deltaY < -threshold) {
      // ìœ„ë¡œ ìŠ¤í¬ë¡¤ (ì• ë¬¸ì¥ìœ¼ë¡œ ëŒì•„ê°€ê¸°)
      if (introIndex > 0) {
        introIndex--;
        showIntroLine(introIndex);
      }
    }
  }

  window.addEventListener('wheel', handleIntroWheel, { passive: false });

  // --- í–‰ì„±/ë°°ê²½ íšŒì „ ìƒíƒœ ---
  let lastScrollY = window.scrollY;
  let planetAngle = 0;
  let bgAngle = 0;

  // --- ê±·ê¸° ìŠ¤í”„ë¼ì´íŠ¸ ì œì–´ ---
  const FRAME_WIDTH = 800;      // ê° í”„ë ˆì„ ê°€ë¡œ í¬ê¸°(px)
  const TOTAL_FRAMES = 12;      // ì „ì²´ í”„ë ˆì„ ìˆ˜ (0~11)
  const IDLE_FRAME = 0;         // ì •ì§€ í”„ë ˆì„ ì¸ë±ìŠ¤
  let currentFrame = IDLE_FRAME;
  let stopTimer = null;

  let frameProgress = 0;

  // ğŸ”§ ê±·ê¸° ì†ë„: ëœ ë“¤ì­‰ë‚ ì­‰í•˜ì§€ë§Œ ì˜ˆì „ ëŠë‚Œì— ê°€ê¹ê²Œ
  const FRAME_SPEED_FACTOR = 0.012;

  // ğŸ”§ ìºë¦­í„° í¬ê¸°/ìœ„ì¹˜ ì¡°ì •ìš©
  const CHAR_RATIO = 0.25;
  const ON_SURFACE_OFFSET = 0.06;

  // --- ìºë¦­í„°ë¥¼ í–‰ì„± í¬ê¸°ì— ë¹„ë¡€í•´ì„œ ìŠ¤ì¼€ì¼ë§ + í–‰ì„± ìœ—ë³€ ê·¼ì²˜ì— ê³ ì • ---
  function positionWalker() {
    const rect = planet.getBoundingClientRect();
    const planetSize = rect.width;

    const charSize = planetSize * CHAR_RATIO;
    const scale = charSize / FRAME_WIDTH;
    walker.style.transform = `translateX(-50%) scale(${scale})`;

    const planetTop = rect.top;
    const baseBottom = window.innerHeight - planetTop;
    const bottom = baseBottom - planetSize * ON_SURFACE_OFFSET;

    walker.style.bottom = `${bottom}px`;
  }

  function setWalkerFrame(frameIndex) {
    const x = -FRAME_WIDTH * frameIndex;
    walker.style.backgroundPosition = `${x}px 0`;
  }

  // ì´ˆê¸° ìƒíƒœ
  setWalkerFrame(IDLE_FRAME);
  positionWalker();
  window.addEventListener('resize', positionWalker);

  // --- ìŠ¤í¬ë¡¤: ì¸íŠ¸ë¡œ ëë‚œ ë’¤ì—ë§Œ í–‰ì„±/ë°°ê²½ íšŒì „ + ê±·ê¸° ---
  window.addEventListener('scroll', () => {
    if (!introDone) {
      lastScrollY = window.scrollY;
      return;
    }

    const scrollY = window.scrollY;
    const delta = scrollY - lastScrollY;
    lastScrollY = scrollY;

    const d = Math.abs(delta);

    // íšŒì „ ë¯¼ê°ë„
    planetAngle += d * 0.03;
    bgAngle     += d * 0.01;

    // í° í–‰ì„± íšŒì „
    planet.style.setProperty('--planet-angle', `${planetAngle}deg`);

    // ë°°ê²½ ìš°ì£¼ íšŒì „
    bg.style.transform = `rotate(${bgAngle}deg)`;

    // ë³„ ë ˆì´ì–´: í–‰ì„± ì¤‘ì‹¬ ê¸°ì¤€ìœ¼ë¡œ íšŒì „ (í–‰ì„±ê³¼ ê°™ì€ ê°ë„)
    if (orbitLayer) {
      orbitLayer.style.transform = `rotate(${planetAngle}deg)`;
    }

    // --- ê±·ëŠ” ì†ë„ = ìŠ¤í¬ë¡¤ ì†ë„ì— "ëœ" ë¹„ë¡€í•˜ë„ë¡ í´ë¨í”„ ---
    let speed = d;

    // ë„ˆë¬´ ë¯¸ì„¸í•œ ìŠ¤í¬ë¡¤ë„ ì•½ê°„ì€ ë¨¹ê²Œ
    if (speed < 0.8) speed = 0.8;
    // ë„ˆë¬´ ì„¸ê²Œ íœ  êµ´ë ¤ë„ ê³¼í•˜ê²Œ ë¹¨ë¼ì§€ì§€ ì•Šê²Œ ìƒí•œ
    if (speed > 8) speed = 8;

    frameProgress += speed * FRAME_SPEED_FACTOR;

    while (frameProgress >= 1) {
      frameProgress -= 1;

      if (currentFrame === IDLE_FRAME) {
        currentFrame = 1;
      } else {
        currentFrame++;
        if (currentFrame >= TOTAL_FRAMES) {
          currentFrame = 1;
        }
      }
      setWalkerFrame(currentFrame);
    }

    // ìŠ¤í¬ë¡¤ ë©ˆì¶”ë©´ ì ì‹œ í›„ idleë¡œ
    if (stopTimer) clearTimeout(stopTimer);
    stopTimer = setTimeout(() => {
      currentFrame = IDLE_FRAME;
      frameProgress = 0;
      setWalkerFrame(currentFrame);
    }, 250);
  });
</script>

</body>
</html>
