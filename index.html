<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Planets of Faith</title>
  <link href="https://fonts.cdnfonts.com/css/farm-wave-free" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Gowun+Batang&family=Noto+Sans+KR:wght@100..900&display=swap" rel="stylesheet">

<style>
body {
  margin: 0;
  background: #2a231f;
  height: 10000vh; /* ìŠ¤í¬ë¡¤ ê±°ë¦¬ */

  /* ğŸ”¹ ì‚¬ì´ë“œ ìŠ¤í¬ë¡¤ë°”ë§Œ ìˆ¨ê¸°ê¸° */
  -ms-overflow-style: none;  /* IE, Edge */
  scrollbar-width: none;     /* Firefox */
}
body::-webkit-scrollbar {
  display: none;
}

/* ë“œë˜ê·¸ ë°©ì§€ìš© ê³µí†µ í´ë˜ìŠ¤ */
.no-select {
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}

/* ì¸íŠ¸ë¡œ ì˜¤ë²„ë ˆì´: ë°°ê²½ ìš°ì£¼ + í–‰ì„± ìœ„ì— ë°˜íˆ¬ëª… ë ˆì´ì–´ */
.intro-overlay {
  position: fixed;
  inset: 0;
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 9999;
  opacity: 1;
  transition: opacity 1s ease;
  pointer-events: none;
}

/* ğŸ”¹ íƒ€ì´í‹€ + ë©˜íŠ¸ë¥¼ ë¬¶ëŠ” ê·¸ë£¹ */
.intro-group {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 8px;
  transform: translateY(-8vh);
}

/* ì¸íŠ¸ë¡œ í…ìŠ¤íŠ¸ */
.intro-text {
  font-family: "Gowun Batang", serif;
  color: #F4E4DC;
  max-width: 80vw;
  font-size: 1rem;
  text-align: center;
  line-height: 1.7;
  letter-spacing: 0.04em;
  opacity: 0;
  transition: opacity 0.6s ease;
}

/* ìƒë‹¨ í…ìŠ¤íŠ¸ */
.title {
  font-family: "Gowun Batang", serif;
  position: fixed;
  top: 20px;
  left: 50%;
  transform: translateX(-50%);
  color: #F4E4DC;
  font-size: 1rem;
  text-shadow: 0 0 8px rgba(0,0,0,0.6);
  z-index: 20;
  opacity: 0;
  transition: opacity 1s ease;
}

/* í–‰ì„± ì „ì²´ ë°•ìŠ¤ */
.planet {
  position: fixed;
  left: 50%;
  bottom: 0;
  transform: translate(-50%, 160vw);
  width: 180vw;
  height: 180vw;
  z-index: 5;
}

/* ì‹¤ì œë¡œ íšŒì „í•˜ëŠ” í–‰ì„± ì´ë¯¸ì§€(ê°€ìƒ ìš”ì†Œ) */
.planet::before {
  content: "";
  position: absolute;
  inset: 0;
  background: url("planet.png") center top / cover no-repeat;
  transform-origin: 50% 50%;
  transform: rotate(var(--planet-angle, 0deg));
}

/* ğŸ”¹ ë°°ê²½ ìš°ì£¼ ë ˆì´ì–´ â€“ í™”ë©´ ì¤‘ì•™ì— í° ì •ì‚¬ê°í˜•ìœ¼ë¡œ ê³ ì • */
.bg-layer {
  position: fixed;
  top: 50%;
  left: 50%;
  width: 220vmax;   /* í™”ë©´ ëŒ€ê°ì„ ë³´ë‹¤ í›¨ì”¬ í¬ê²Œ */
  height: 220vmax;
  background: url("backgroundspace.jpg") center/cover no-repeat;
  z-index: -2;
  pointer-events: none;
  transform-origin: 50% 60%;  /* ì—°ìš°ê°€ ë§í•œ ì¤‘ì‹¬ ìœ„ì¹˜ ìœ ì§€ */
  transform: translate(-50%, -50%) rotate(0deg);
}

/* â­ í–‰ì„± ì¤‘ì‹¬ì„ ê¸°ì¤€ìœ¼ë¡œ ë„ëŠ” ë³„ ë ˆì´ì–´ (í–‰ì„± ì•ˆì— ì ˆëŒ€ ë°°ì¹˜) */
.orbit-layer {
  position: absolute;
  inset: 0;
  transform-origin: 50% 50%;
  transform: rotate(var(--orbit-angle, 0deg));
  z-index: 15;
  opacity: 0;
  pointer-events: none;
  transition: opacity 1s ease;
}

/* ================================
   â­ ë³„ ì•µì»¤: ê¶¤ë„ ìœ„ì¹˜ë§Œ ë‹´ë‹¹
   ================================ */
.orbit-dot {
  position: absolute;
  top: 50%;
  left: 50%;
  transform-origin: 50% 50%;
}

/* ê° ë³„ì˜ ê¶¤ë„ ìœ„ì¹˜ (ê°ë„ë§Œ ë‹¤ë¦„) */
.orbit-dot:nth-child(1) {
  transform: translate(-50%, -50%) rotate(0deg) translateY(-114vw);
}
.orbit-dot:nth-child(2) {
  transform: translate(-50%, -50%) rotate(60deg) translateY(-114vw);
}
.orbit-dot:nth-child(3) {
  transform: translate(-50%, -50%) rotate(120deg) translateY(-114vw);
}
.orbit-dot:nth-child(4) {
  transform: translate(-50%, -50%) rotate(180deg) translateY(-114vw);
}
.orbit-dot:nth-child(5) {
  transform: translate(-50%, -50%) rotate(240deg) translateY(-114vw);
}
.orbit-dot:nth-child(6) {
  transform: translate(-50%, -50%) rotate(300deg) translateY(-114vw);
}

/* â­ ì‹¤ì œë¡œ ë³´ì´ëŠ” ë³„ ì½”ì–´ (í¬ê¸°Â·ì• ë‹ˆë©”ì´ì…˜ ë‹´ë‹¹) */
.orbit-dot::after {
  content: "";
  position: absolute;
  top: 50%;
  left: 50%;
  width: 12px;
  height: 12px;
  border-radius: 50%;
  background: white;
  box-shadow: 0 0 12px rgba(255,255,255,0.9);
  transform: translate(-50%, -50%);
  animation: twinkle 3s ease-in-out infinite alternate;
  transition: transform 0.2s ease, box-shadow 0.2s ease;
}

/* â­ í˜¸ë²„ hitbox: ì‚´ì§ ë„“ê²Œ */
.orbit-dot::before {
  content: "";
  position: absolute;
  top: 50%;
  left: 50%;
  width: 30px;
  height: 30px;
  transform: translate(-50%, -50%);
  border-radius: 50%;
  background: transparent;
}

/* â­ í˜¸ë²„ ì‹œ: ì½”ì–´ë§Œ ì»¤ì§€ê³  ë°˜ì§ì„ ë©ˆì¶¤ */
.orbit-dot:hover::after {
  transform: translate(-50%, -50%) scale(1.35);
  animation: none;
  box-shadow: 0 0 20px rgba(255,255,255,1);
}

/* ë³„ ë°˜ì§ì„ */
@keyframes twinkle {
  0%   { opacity: 0.3; box-shadow: 0 0 4px rgba(255,255,255,0.4); }
  50%  { opacity: 0.9; box-shadow: 0 0 12px rgba(255,255,255,1); }
  100% { opacity: 0.5; box-shadow: 0 0 6px rgba(255,255,255,0.7); }
}

/* íˆ´íŒ ë°•ìŠ¤ (JSë¡œ ìœ„ì¹˜ ì œì–´) */
.tooltip {
  position: fixed;
  padding: 8px 12px;
  background: #F4E4DC;
  color: #2a231f;
  border-radius: 8px;
  font-family: "Gowun Batang", serif;
  font-size: 0.8rem;
  box-shadow: 0 4px 16px rgba(0,0,0,0.25);
  pointer-events: none;
  opacity: 0;
  visibility: hidden;
  transform: translate(-15%, -50%);
  transition: opacity 0.15s ease;
  z-index: 100000;
}

/* ì œëª© + ìë¬¼ì‡  + ì ê¸ˆë¬¸êµ¬ í•œ ì¤„ */
.tooltip-title {
  font-weight: 700;
  display: inline-flex;
  align-items: center;
  gap: 4px;
  white-space: nowrap;
}

/* ìë¬¼ì‡  ì•„ì´ì½˜ */
.lock-icon {
  width: 1em;   /* í°íŠ¸ í¬ê¸°ë§Œí¼ */
  height: 1em;
  display: none; /* ê¸°ë³¸ì€ ì•ˆ ë³´ì´ê²Œ */
  object-fit: contain;
}

/* ìë¬¼ì‡  ì˜† í…ìŠ¤íŠ¸ */
.locked-msg {
  font-weight: 400;
  font-size: 0.9em;
  opacity: 0.8;
  display: none; /* ê¸°ë³¸ì€ ê°ì¶¤ */
}

.tooltip-desc {
  line-height: 1.4;
  white-space: nowrap;
}

/* ê±·ëŠ” ìºë¦­í„°(ì–´ë¦°ì™•ì+ì—¬ìš°) */
.walker {
  position: fixed;
  left: 50%;
  bottom: 8vh;
  transform: translateX(-50%);
  width: 800px;
  height: 800px;
  background-image: url("walkani.png");
  background-repeat: no-repeat;
  background-position: 0 0;
  transform-origin: 50% 100%;
  opacity: 0;
  transition: opacity 1s ease;
  z-index: 10;
  pointer-events: none;
}

/* ğŸ”¹ ì¸íŠ¸ë¡œ íƒ€ì´í‹€ */
.intro-title {
  font-family: 'Farm Wave Free', sans-serif;
  font-size: 2.5rem;
  color: #F4E4DC;
  letter-spacing: 0.05em;
  text-shadow: 0 0 12px rgba(0,0,0,0.6);
  opacity: 1;
  transition: opacity 1s ease;
  pointer-events: none;
  text-align: center;
}

/* ì¸íŠ¸ë¡œ ëë‚  ë•Œ ì‚¬ë¼ì§€ëŠ” ìƒíƒœ */
.intro-title.hide {
  opacity: 0;
}

/* ğŸ”¹ ì „ì²´ ë¬¸ì„œ ìŠ¤í¬ë¡¤ë°” ìˆ¨ê¸°ê¸° (ìŠ¤í¬ë¡¤ ê¸°ëŠ¥ì€ ìœ ì§€) */
html {
  -ms-overflow-style: none;
  scrollbar-width: none;
}
html::-webkit-scrollbar {
  display: none;
}
</style>

</head>
<body>
  <!-- ì¸íŠ¸ë¡œ í…ìŠ¤íŠ¸ ì˜¤ë²„ë ˆì´ -->
  <div class="intro-overlay">
    <div class="intro-group no-select">
      <div class="intro-title no-select">Planets of Faith</div>
      <div class="intro-text no-select"></div>
    </div>
  </div>

  <!-- ë°°ê²½ ìš°ì£¼ -->
  <div class="bg-layer"></div>

  <!-- í° í–‰ì„± + ê·¸ ì¤‘ì‹¬ì„ ë„ëŠ” ë³„ë“¤ -->
  <div class="planet">
    <div class="orbit-layer">
      <div class="orbit-dot"
           data-title="The Planet of Life"
           data-desc="ë‹¹ì‹ ì´ ë¯¿ê³  ì‚´ì•„ê°€ëŠ” ê°€ì¹˜ê°€ ëª¨ì—¬ìˆëŠ” í–‰ì„±ì…ë‹ˆë‹¤."></div>
    
      <div class="orbit-dot"
           data-title="The Planet of Art"
           data-desc="ì´ ê³³ì˜ ê³¤ì¬ë“¤ì€ íŠ¹ì •í•œ ì˜ˆìˆ ê´€ì„ ê°€ì§€ê³  ì‚´ì•„ê°‘ë‹ˆë‹¤."></div>

      <div class="orbit-dot"
           data-title="The Planet of Ego"
           data-desc="ì´ ê³³ì˜ ê³¤ì¬ë“¤ì€ íŠ¹ì •í•œ ìì•„ê´€ì„ ê°€ì§€ê³  ì‚´ì•„ê°‘ë‹ˆë‹¤."></div>

      <div class="orbit-dot"
           data-title="The Planet of Emotion"
           data-desc="ì´ ê³³ì˜ ê³¤ì¬ë“¤ì€ íŠ¹ì •í•œ ê°ì •ê´€ì„ ê°€ì§€ê³  ì‚´ì•„ê°‘ë‹ˆë‹¤."></div>

      <div class="orbit-dot"
           data-title="The Planet of Work"
           data-desc="ì´ ê³³ì˜ ê³¤ì¬ë“¤ì€ íŠ¹ì •í•œ ì§ì—…ê´€ì„ ê°€ì§€ê³  ì‚´ì•„ê°‘ë‹ˆë‹¤."></div>

      <div class="orbit-dot"
           data-title="The Planet of Relation"
           data-desc="ì´ ê³³ì˜ ê³¤ì¬ë“¤ì€ íŠ¹ì •í•œ ê´€ê³„ê´€ì„ ê°€ì§€ê³  ì‚´ì•„ê°‘ë‹ˆë‹¤."></div>
    </div>
  </div>

  <!-- ìƒë‹¨ í…ìŠ¤íŠ¸ -->
  <div class="title no-select">íƒì‚¬í•  í–‰ì„±ì„ ì„ íƒí•˜ì„¸ìš”</div>

  <!-- ê±·ëŠ” ìºë¦­í„° -->
  <div class="walker"></div>

  <!-- íˆ´íŒ ë°•ìŠ¤ -->
  <div class="tooltip" id="planetTooltip">
    <div class="tooltip-title">
      <span class="tooltip-title-text"></span>
      <img src="lock.png" alt="locked" class="lock-icon" />
      <span class="locked-msg">*5ê°œì˜ í–‰ì„± íƒí—˜ ì™„ë£Œ í›„ ì ê¸ˆì´ í•´ì œë©ë‹ˆë‹¤.*</span>
    </div>
    <div class="tooltip-desc"></div>
  </div>

<script>
  const planet = document.querySelector('.planet');
  const bg = document.querySelector('.bg-layer');
  const walker = document.querySelector('.walker');
  const orbitLayer = document.querySelector('.orbit-layer');
  const dots = document.querySelectorAll('.orbit-dot');
  const tooltip = document.getElementById('planetTooltip');
  const tooltipTitleText = tooltip.querySelector('.tooltip-title-text');
  const tooltipDesc = tooltip.querySelector('.tooltip-desc');
  const lockIcon = tooltip.querySelector('.lock-icon');
  const lockedMsg = tooltip.querySelector('.locked-msg');

  // --- ì¸íŠ¸ë¡œ ê´€ë ¨ ìš”ì†Œ/í…ìŠ¤íŠ¸ ---
  const introOverlay = document.querySelector('.intro-overlay');
  const introTextEl = document.querySelector('.intro-text');

  const introLines = [
    "(scroll down)",
    "ì„¸ìƒì—ëŠ” ì €ë§ˆë‹¤ ì¥ê³  ìˆëŠ” ë¯¿ìŒì´ ìˆë‹¤ê³  í•´ìš”.",
    "â€˜ì‚¬ë‘ì€ ìµœê³ ì˜ ê°€ì¹˜ì•¼.', â€˜ê°ì •ì€ í†µì œí•´ì•¼í•´.â€™, â€˜ì˜ì›í•œ ê±´ ì—†ì–´.' ë“±.",
    "ìê¸° ë§ì„ ê°€ì¥ ì˜³ë‹¤ê³  ë¯¿ëŠ” ì‚¬ëŒë“¤ì€ ì„œë¡œì˜ ë§ì´ ë“¤ë¦¬ì§€ ì•ŠëŠ”ëŒ€ìš”.",
    "ì‚´ê¸° ìœ„í•´ ë§Œë“  ë¯¿ìŒë“¤ì€ ì´ ê³³ì—ì„œ ëª¨ì—¬ í–‰ì„±ì„ ì´ë£¨ê³ ,",
    "ì–´ë–¤ ì‚¬ëŒë“¤ì€ ê·¸ í–‰ì„± ì•ˆì— í‰ìƒ ê°‡íŒ ì±„ ì‚´ì•„ê°„ëŒ€ìš”.",
    "ëˆ„ê°€ ì˜³ì€ì§€ëŠ” ëª°ë¼ë„, í–‰ì„±ë“¤ ì‚¬ì´ë¥¼ íƒí—˜í•˜ë©° ë§ë“¤ì„ ëª¨ìœ¼ê³  ìˆì–´ìš”.",
    "ì œê°€ ë¯¿ê³  ì‚´ì•„ê°ˆ ê°€ì¹˜ëŠ” ë¬´ì—‡ì¼ê¹Œìš”?"
  ];

  let introDone = false;
  let introIndex = 0;
  let introAnimating = false;

  function showIntroLine(index) {
    introAnimating = true;
    introTextEl.style.opacity = 0;

    setTimeout(() => {
      introTextEl.textContent = introLines[index];
      introTextEl.style.opacity = 1;
      setTimeout(() => {
        introAnimating = false;
      }, 600);
    }, 150);
  }

  function finishIntro() {
    if (introDone) return;
    introDone = true;

    if (introOverlay) {
      introOverlay.style.opacity = 0;
      setTimeout(() => {
        introOverlay.style.display = 'none';
      }, 1000);
    }

    const titleEl = document.querySelector('.title');
    if (titleEl) {
      titleEl.style.opacity = 1;
    }

    const introTitleEl = document.querySelector('.intro-title');
    if (introTitleEl) {
      introTitleEl.classList.add('hide');
    }

    walker.style.opacity = 1;

    orbitLayer.style.opacity = 1;
    orbitLayer.style.pointerEvents = 'auto';

    document.body.style.overflow = 'auto';

    window.removeEventListener('wheel', handleIntroWheel, { passive: false });

    lastScrollY = window.scrollY;
  }

  function handleIntroWheel(e) {
    if (introDone) return;

    e.preventDefault();

    if (introAnimating) return;

    const threshold = 10;

    if (e.deltaY > threshold) {
      if (introIndex < introLines.length - 1) {
        introIndex++;
        showIntroLine(introIndex);
      } else {
        finishIntro();
      }
    } else if (e.deltaY < -threshold) {
      if (introIndex > 0) {
        introIndex--;
        showIntroLine(introIndex);
      }
    }
  }

  // ğŸ”¹ í˜ì´ì§€ ë¡œë“œ ì‹œ: URL íŒŒë¼ë¯¸í„° ë³´ê³  ì¸íŠ¸ë¡œ ìŠ¤í‚µ ì—¬ë¶€ ê²°ì •
  window.addEventListener('load', () => {
    const params = new URLSearchParams(window.location.search);
    const skipIntro = params.get('skipIntro') === 'true';

    if (skipIntro) {
      // ì¸íŠ¸ë¡œ ì—†ì´ ë°”ë¡œ ë©”ì¸ ìƒíƒœë¡œ
      finishIntro();
    } else {
      // í‰ì†Œì²˜ëŸ¼ ì¸íŠ¸ë¡œ ë³´ì—¬ì£¼ê¸°
      document.body.style.overflow = 'hidden';
      showIntroLine(introIndex);
      window.addEventListener('wheel', handleIntroWheel, { passive: false });
    }
  });

  // --- íšŒì „ ìƒíƒœ ---
  let lastScrollY = window.scrollY;
  let planetAngle = 0;
  let orbitAngle = 0;
  let bgAngle = 0;

  // --- ê±·ê¸° ìŠ¤í”„ë¼ì´íŠ¸ ì œì–´ ---
  const FRAME_WIDTH = 800;
  const TOTAL_FRAMES = 12;
  const IDLE_FRAME = 0;
  let currentFrame = IDLE_FRAME;
  let stopTimer = null;

  let frameProgress = 0;
  const FRAME_SPEED_FACTOR = 0.05;

  const CHAR_RATIO = 0.25;
  const ON_SURFACE_OFFSET = 0.06;

  function positionWalker() {
    const rect = planet.getBoundingClientRect();
    const planetSize = rect.width;

    const charSize = planetSize * CHAR_RATIO;
    const scale = charSize / FRAME_WIDTH;
    walker.style.transform = `translateX(-50%) scale(${scale})`;

    const planetTop = rect.top;
    const baseBottom = window.innerHeight - planetTop;
    const bottom = baseBottom - planetSize * ON_SURFACE_OFFSET;

    walker.style.bottom = `${bottom}px`;
  }

  function setWalkerFrame(frameIndex) {
    const x = -FRAME_WIDTH * frameIndex;
    walker.style.backgroundPosition = `${x}px 0`;
  }

  setWalkerFrame(IDLE_FRAME);
  positionWalker();
  window.addEventListener('resize', positionWalker);

  // --- íˆ´íŒì´ ë³„ ìœ„ì¹˜ë¥¼ ë”°ë¼ê°€ë„ë¡ í•˜ëŠ” ë¶€ë¶„ ---
  let hoveredDot = null;
  let tooltipAnimId = null;

  function updateTooltipPosition() {
    if (!hoveredDot) return;

    const rect = hoveredDot.getBoundingClientRect();
    const centerX = rect.left + rect.width / 2;
    const centerY = rect.top + rect.height / 2;

    const offsetX = 65;
    const offsetY = 0;

    tooltip.style.left = (centerX + offsetX) + 'px';
    tooltip.style.top  = (centerY + offsetY) + 'px';

    tooltipAnimId = requestAnimationFrame(updateTooltipPosition);
  }

  dots.forEach((dot) => {
    const title = dot.getAttribute('data-title');
    const desc = dot.getAttribute('data-desc');

    dot.addEventListener('mouseenter', () => {
      if (!title) return;

      hoveredDot = dot;
      tooltipTitleText.textContent = title;
      tooltipDesc.innerHTML = (desc || "").replace(/\n/g, "<br>");

      // ğŸ”’ 'The Planet of Life'ì¼ ë•Œë§Œ ìë¬¼ì‡  + ì ê¸ˆ ë¬¸êµ¬ ë³´ì´ê¸°
      if (title === 'The Planet of Life') {
        lockIcon.style.display = 'inline-block';
        lockedMsg.style.display = 'inline';
      } else {
        lockIcon.style.display = 'none';
        lockedMsg.style.display = 'none';
      }

      tooltip.style.opacity = '1';
      tooltip.style.visibility = 'visible';

      if (tooltipAnimId) cancelAnimationFrame(tooltipAnimId);
      updateTooltipPosition();
    });

    dot.addEventListener('mouseleave', () => {
      hoveredDot = null;
      if (tooltipAnimId) {
        cancelAnimationFrame(tooltipAnimId);
        tooltipAnimId = null;
      }
      tooltip.style.opacity = '0';
      tooltip.style.visibility = 'hidden';

      lockIcon.style.display = 'none';
      lockedMsg.style.display = 'none';
    });

    dot.addEventListener('click', () => {
      // ğŸ”¹ ê´€ê³„ í–‰ì„± í´ë¦­ â†’ index2.htmlë¡œ ì´ë™
      if (title === 'The Planet of Relation') {
        window.location.href = 'index2.html';
      }
      console.log('Clicked:', title);
    });
  });

  // --- ìŠ¤í¬ë¡¤: ì¸íŠ¸ë¡œ ëë‚œ ë’¤ì—ë§Œ í–‰ì„±/ë³„/ë°°ê²½ íšŒì „ + ê±·ê¸° ---
  window.addEventListener('scroll', () => {
    if (!introDone) {
      lastScrollY = window.scrollY;
      return;
    }

    const scrollY = window.scrollY;
    const delta = scrollY - lastScrollY;
    lastScrollY = scrollY;

    const d = Math.abs(delta);

    // íšŒì „ ì†ë„: ë°°ê²½ < ë³„ < í–‰ì„±
    planetAngle += d * 0.03; // ê·¸ëŒ€ë¡œ
    orbitAngle  += d * 0.01; // ì¤‘ê°„
    bgAngle     += d * 0.003; // ê°€ì¥ ëŠë¦¬ê²Œ

    // í–‰ì„± íšŒì „
    planet.style.setProperty('--planet-angle', `${planetAngle}deg`);

    // ë³„ ê¶¤ë„ íšŒì „
    if (orbitLayer) {
      orbitLayer.style.setProperty('--orbit-angle', `${orbitAngle - 30 }deg`);
    }

    // ë°°ê²½ ìš°ì£¼ íšŒì „ (ì¤‘ì‹¬ ê³ ì •)
    bg.style.transform = `translate(-50%, -50%) rotate(${bgAngle}deg)`;

    // --- ê±·ëŠ” ì†ë„ ---
    let speed = d;
    if (speed < 0.8) speed = 0.8;
    if (speed > 8)   speed = 8;

    frameProgress += speed * FRAME_SPEED_FACTOR;

    while (frameProgress >= 1) {
      frameProgress -= 1;

      if (currentFrame === IDLE_FRAME) {
        currentFrame = 1;
      } else {
        currentFrame++;
        if (currentFrame >= TOTAL_FRAMES) {
          currentFrame = 1;
        }
      }
      setWalkerFrame(currentFrame);
    }

    if (stopTimer) clearTimeout(stopTimer);
    stopTimer = setTimeout(() => {
      currentFrame = IDLE_FRAME;
      frameProgress = 0;
      setWalkerFrame(currentFrame);
    }, 250);
  });
</script>
</body>
</html>
